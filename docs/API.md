# Trackpal API

## Authorization

Get a jwt token that can be used for authenticated requests
```bash
http POST <url> <<< \
'{"email": "admin", "password": "1234"}'
```

```
200
---
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjcmVhdGVkX2F0IjoiMjAyMC0wMi0xOFQx...
```

```
400
---
{"msg": "string"}
```
 
Refresh your jwt token (get a new one)
```bash
http POST <url>/auth/refresh "Authorization: Bearer <jwt>"

200
---
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjcmVhdGVkX2F0IjoiMjAyMC0wMi0xOFQx...
```

```
400
---
{"msg": "string"}
```

Register a new user account. Sends an activation token to the provided
email address. If the account is not activated withing 24hours it gets deleted.
```bash
http POST <url>/auth/register <<< \
'{
    "password": "1234",
    "email": "me@mail.com", 
    "first_name": "Ken", 
    "last_name": "Thompson"
}'
```

```
201
---
```

```
400
---
{"msg": "string"}
```

## Devices

Get a list of devices owned by you
```bash
http GET <url>/devices "Authorization: Bearer <jwt>"
```

Create a new device
```bash
http POST <url>/devices "Authorization: Bearer <jwt>" <<< \
{"name": "My gps tracker"}
```


## Tracking Records

Get all the records that were generated by a target device
```bash
http GET <url>/devices/<deviceID>/entries
```

Create a new tracking record for a target device
```bash
http POST <url>/devices/<deviceID>/entries <<< \
{ \
    "recorded_at": "2019-10-10T10:19:00Z", \
    "location": {"lat": 12.123, "lng": 12.123} \
}
```
